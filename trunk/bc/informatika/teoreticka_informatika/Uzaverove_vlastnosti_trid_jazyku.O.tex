%&latex
\subsection{Uzávìrové vlastnosti tøíd jazykù\footnote{Zdroj tabulky: \url{http://en.wikipedia.org/wiki/Formal_language#Operations_on_languages}}}
\begin{center}

\def\ano{\textcolor{green}{\ding{52}}}
\def\ne{\textcolor{red}{\ding{54}}}

\begin{tabular}{| p{2.4cm} | 1 | 1 | 1 | 1 | 1 | 1 | }
\hline          
    & ~RJ~ & DBKJ & ~BKJ & ~KJ~ & ~RekJ~ & ~RSJ \\          
\hline                         
Sjednocení & \ano & \ne & \ano & \ano & \ano & \ano  \\
\hline            
  Prùnik & \ano & \ne & \ne & \ano & \ano & \ano  \\
\hline            
  Prùnik s RJ & \ano & \ano & \ano & \ano & \ano & \ano  \\
\hline 
  Doplnìk ($-L$) & \ano & \ano & \ne & \ano & \ano & \ne  \\
\hline 
  Homomorfismus / Substituce & \ano & \ne & \ano & \ne & \ne & \ano  \\
\hline 
  Inverzní homo. & \ano & \ano & \ano & \ano & \ano & \ano \\
\hline
\hline  
  Zrcadení ($L^R$) & \ano & \ne & \ano & \ano & \ano & \ano  \\
\hline  
  Zøetìzení & \ano & \ne & \ano & \ano & \ano & \ano  \\
\hline             
  Iterace ($L^*$) & \ano & \ne & \ano & \ano & \ano & \ano  \\
\hline             
  Rozdíl  & \ano & \ne & \ne & \ano & \ano & \ano  \\
\hline  
\end{tabular}
\end{center}
Rozdíl lze vyjádøit pomocí prùniku a doplòku take z nich vyplıvá.\\
Pozor KJ nejsou uzavøené na substituci tak jak ji definuje Barták\footnote{viz napø.:
\url{http://planetmath.org/encyclopedia/RegularSubstitution.html} v tabulce
ve en-wikipedii se mluví asi o $\lambda$-free substituci}.

\subsubsection*{Bezkontextové jazyky}

\begin{e}{Poznámka}{0}{(D)BKJ nejsou uzavøené na prùnik}
staèí najít dva BKJ, jejich prùnik není BKJ:\\
$L_1 = \{a^ib^ic^j | 0\leq i,j\} \{S\rightarrow AC, A \rightarrow aAb | \lambda, C \rightarrow cC | \lambda\}$\\
$L_2 = \{a^ib^jc^j | 0\leq i,j\} \{S\rightarrow AB, A \rightarrow aA | \lambda, B \rightarrow bBc | \lambda\}$\\
$L_1 \cap L_{2} = \{a^ib^ic^i | 0\leq i\}$ není BKJ (víme z pumping lemmatu)\\
paralelní bìh dvou zásobníkovıch automatù: øídící jednotky umíme spojit (viz koneèné automaty), ètení umíme spojit (jeden automat mùe èekat), bohuel dva zásobníky nelze obecnì spojit do jednoho (dva zásobníky = Turingùv stroj, rekurzivnì spoèetné jazyky)
\end{e}

\begin{e}{Poznámka}{0}{(D)BKJ jsou uzavøené na prùnik s RJ}
zásobníkovı a koneènı automat mùeme spojit

koneènı automat $A_1 = (Q_1,X,\delta_1,q_1,F_1)$

zásobníkovı automat (pøijímání stavem) $M_2 = (Q_2,X,Y,\delta_2,q_2,Z_0,F_2)$

novı automat $M = (Q_1 × Q_2, X, Y, \delta, (q_1,q_2), Z_0, F_1 × F_2)$

~~$((p‘,q‘), u) \in\delta((p,q),a,Z)$ právì kdy

~~• $a\neq\lambda: p‘\in\delta_1(p,a)\ \&\ (q‘,u)\in\delta_2(q,a,Z)$ … automaty ètou vstup

~~• $a=\lambda: (q‘,u)\in\delta_2(q,\lambda,Z)$ … ZA mìní zásobník

~~~~~~~~~~~~~~~$p‘=p$ … KA stojí

zøejmì $L(M) = L(A_1)\cap L(M_2)$ (paralelní bìh automatù)
\end{e}

\begin{e}{Poznámka}{0}{BKJ jsou uzavøené na sjednocení}
pouijeme gramatiky (pro ZA nedeterministickı rozeskok na startu)\\
$L_1=L(G_1)$ $G_1 = (V_{N1},V_{T1},S_1,P_1)$\\
$L_2=L(G_2)$ $G_2 = (V_{N2},V_{T2},S_2,P_2)$\\
mùeme pøedpokládat, $e V_{N1} \cap V_{N2} = \varnothing$ (jinak pøejmenuj)\\
udìláme gramatiku:

$G = (V_{N1} \cup V_{N2} \cup \{S\}, V_{T1} \cup V_{T2}, S, P_1 \cup P_2 \cup \{S \rightarrow S_1 | S_2\})$\\
zøejmì $L(G) = L(G_1) \cup L(G_2)$

„poèítá“ jedna nebo druhá gramatika
\end{e}

\begin{e}{Poznámka}{0}{BKJ nejsou uzavøené na doplnìk}
sporem podle de Morganovıch pravidel\\
$L_1 \cap L_2 = -(-L_1 \cup -L_2)$\\
bezkontextové jazyky nejsou uzavøené na prùnik - SPOR\\
v ZA nestaèí prohodit koncové a nekoncové stavy!
\end{e}

\begin{e}{Definice}{0}{Substituce a homomorfismus}
\textit{Substituce} $\sigma$ pøevádí slova na jazyky

\sigma(\lambda) = \lambda, \sigma(x) = jazyk

\sigma(uv) = \sigma(u). \sigma(v) ~~\sigma: X^* \rightarrow P(Y^*)

\sigma(L) = \cup_{w\in L} \sigma(w)

Tøída T jazykù je uzavøena na substituci, kdy: \forall a\in X: \sigma (a)\in
T~\&~ L\in T \Rightarrow \sigma(L)\in T$
\\\\
\textit{Homomorfismus} pøevádí slova na slova

$h(\lambda) = \lambda, h(x) = slovo

$h(uv) = h(u) . h(v) ~~h: X^* \rightarrow Y^*

$h(L) = \{h(w) | w\in L\}$
\\\\
\textit{Inverzní homomorfismus} pøevádí slova zpìt
h^{-1}(L) = \{ w | h(w)\in L\}
\end{e}

\begin{e}{Poznámka}{0}{BKJ jsou uzavøeny na substituci}
intuitivnì: listy v derivaèním stromu generují další stromy
\\
formálnì:
máme bezkontextovı jazyk $L_0$, tj. gramatiku $G_0 = (V_{N0},V_{T0},S_0,P_0)$,
pro kadı terminál ai z  $V_{T0}$, $\sigma(a_i)$ je bezkontextovı jazyk - gramatika $G_i$ pøedpokládejme, e mnoiny neterminálù jsou navzájem disjunktní
a e ádnı terminál není v jiné gramatice neterminálem

definujme $G = (\cup_{i\geq0}V_{Ni}, \cup_{i\geq1}V_{Ti}, S_0, P)$, kde

$P = \cup_{i\geq1}P_i \cup P'$ a $P' = P_0$, kde kadı terminál $a_i$ je nahrazen $S_i$

zøejmì: $L(G) = \sigma(L_0)$
\\
Pøíklad:

\begin{minipage}{0.2\linewidth}
$L_0 = \{a^ib^j ~|~ 0\leq i\leq j\}$ \\
$\sigma(a) = L_1 = {c^id^i | 0\leq i\}$ \\
$\sigma(b) = L_2 = {c^i | 0\leq i\}$ \\
$\sigma(L_0):$
\end{minipage}
\noindent\begin{minipage}{0.4\linewidth}
\vspace{0.3cm}
$S_0 \rightarrow aS_0b | S_0b | \lambda$ \\
$S1 \rightarrow cS_1d | \lambda$ \\
$S2 \rightarrow cS_2 | \lambda$ \\
$S0 \rightarrow S_1S_0S_2 | S_0S_2 | \lambda,~ S_1 \rightarrow cS_1d | \lambda,~ S_2 \rightarrow cS_2 | ?$ \\
\end{minipage}
\noindent\begin{minipage}{0.1\linewidth}
\vspace{0pt}
\centering
\includegraphics[width=0.9\textwidth]{informatika/teoreticka_informatika/obrazky/der_strom.png}
\end{minipage}

\end{e}

\begin{e}{Poznámka}{0}{BKJ jsou uzavøeny na homomorfismus}
pøímı dùsledek pøedchozí vìty (terminál nahradíme slovem)
\end{e}

\begin{e}{Poznámka}{0}{BKJ jsou uzavøeny na inverzní homomorfismus}
$h^{-1}(L) = \{ w | h(w)\in L\}$ - máme zásobníkovı automat M pro L a èteme w\\
idea:

– pøeèteme písmeno x a do vnitøního bufferu dáme h(x)

– simulujeme vıpoèet M, kdy vstup bereme z bufferu

– po vyprázdnìní bufferu naèteme další písmeno ze vstupu

– slovo je pøijato, kdy je buffer prázdnı a M je v koncovém stavu
\\
formálnì:

buffer je koneènı, mùeme ho tedy modelovat ve stavu
pro $L$ máme $M = (Q,X,Y,\delta,q_0,Z_0,F)$ (pøíjímání koncovım stavem)

$h: A^* \rightarrow X^*$

definujme $M' = (Q', A, Y, \delta',[q_0,\lambda], Z_0, F×\{\lambda\})$, kde

$Q' = \{[q,u] ~|~ q\in Q,~ u\in X^*, ~\exists a\in A ~\exists v\in X^* ~h(a)=vu\}$, u je buffer

$\delta'([q,u], \lambda, Z) = \{ ([p,u],\gamma) | (p,\gamma) \in \delta(q, \lambda, Z) \}$

~~~~~~~~~~~~~~~~~~$\cup~ \{ ([p,v],\gamma ) ~|~ (p,\gamma) \in (q, b, Z) \}$ … $u=bv$ (ète buffer)

$\delta'([q, \lambda], a, Z) = \{ ([q,h(a)],Z) \}$ … naplòuje buffer
\end{e}

\begin{e}{Poznámka}{0}{DBKJ nejsou uzavøené na sjednocení (BKJ ano)!}
Pøíklad:

$L = {a^ib^jc^k ~|~ i\neq j ~OR~ j\neq k ~OR~ i\neq k\}$ je BKJ, ale není DBKJ

sporem: nech $L$ je DBKJ
potom $-L$ (doplnìk) je DBKJ

$-L \cap a*b*c* = \{a^ib^jc^k | i=j=k\}$ je DBKJ - SPOR
\end{e}

\begin{e}{Poznámka}{0}{DBKJ nejsou uzavøené na homomorfismus (BKJ ano)!}
Pøíklad:

$L_1 = \{a^ib^jc^k | i=j\}$ je DBKJ

$L_2 = \{a^ib^jc^k | j=k\}$ je DBKJ

$0L_1 \cup 1L_2$ je DBKJ, $1L_1 \cup 1L_2$ není DBKJ

polome $h(0) = 1$ a $h(x) = x$ pro ostatní symboly

$h(0L_1 \cup 1L_2) = 1L_1 \cup 1L_2$
\end{e}



\begin{e}{Poznámka}{0}{Doplnìk deterministického BKJ je opìt deterministickı BKJ!}
prohodíme koncové a nekoncové stavy\\
potíe:\\
• nemusí pøeèíst celé vstupní slovo\\
– krok není definován (napø. vyprázdnìní zásobníku)

snadno ošetøíme „podlokou“ na zásobníku\\
– cyklus (zásobník roste, zásobník pulsuje)

odhalíme pomocí èítaèe\\
• po pøeètení slova prochází koncové a nekoncové stavy

staèí si pamatovat, zda prošel koncovım stavem
\end{e}

\subsubsection*{Kontextové jazyky}

\begin{e}{Poznámka\footnote{J.Hopcroft,J.Ullmann: FORMAL LANGUAGES AND THEIR RELATION TO AUTOMATA, str.127}}{0}{KJ nejsou uzavøené na substituci a homomorfismus}
Proof Let $G_1 = (V_N, V_T, P_1, S)$ be a type 0 grammar such that $L(G_1)$ is
not a context-sensitive language. We assume without loss of
generality that the productions are of the form $\alpha\rightarrow\beta$ or $A\rightarrow a$, where $\alpha\in V^+_N$, $\beta \in V^*_N$, $A \in V_N$, and $a \in V_T$. Let $c$ be a new symbol.
\\Consider the grammar $G_2 = (V_N, V_T\cup \{C\}, P_2, S)$ where $P_2$ contains:
\\1. $\alpha\rightarrow\beta$ if $\alpha\rightarrow\beta$ is in $P_2$ and $|\alpha|\leq|\beta|$.
\\2. $\alpha\rightarrow\beta cc...c$ where $|\alpha|=|\beta cc...c|$ if $\alpha\rightarrow\beta$ is in $P_2$ and $|\alpha|<|\beta|$.
\\3. $cA\rightarrow Ac$ $\forall A \in V_N$.
\\The grammar $G_2$ is context sensitive, since we have forced the right-hand
side of every Production to be at least as long as the left-hand side. The
productions $cA\rightarrow Ac$ were added to move the $c$'s to the right end of
the words so that derivations in $G_2$ can proceed as in $G_1$. Now consider the
substitution
\\$\sigma(a) = \{a\}$ for $a \in V_T$ and $\sigma(c) = \{\lambda\}$.
\\Then $\sigma(L(G_2)) = L(G_1)$ (a type 0 grammar) and hence substitution does not preserve the class
of Context-sensitive languages.
\\\\ \LARGE\sun\normalsize~ The substitution used in the proof is a homomorphism.
\end{e}

\subsubsection*{Rekurzivní a rekurzivnì spoèetné jazyky}

\begin{e}{Vìta}{0}{Postova}
$L$ je rekurzivní $\Leftrightarrow$ $-L$ a $L$ jsou rekurzivnì spoèetné
\end{e}

\begin{e}{Poznámka\footnote{Zdroj: \url{http://youbo2010.blogspot.com/2011/04/why-recursive-languages-are-not-closed.html}}}{0}{RSJ
jsou a RekJ nejsou uzavøené na homomorfismus}
First let's consider a much simpler problem, inverse homomorphism, in which w is in L' if and only h(w) is in L. We can just apply h to w and let the TM accepting L run with input h(w). So L' is recursively enumerable(resp. recursive) if L is recursively enumerable(resp. recursive).
\\\\
Now we'll attack homomorphism, in which $x\in L' \Leftrightarrow \exists
w\in L : h(w)=x$.
\\\\
For recursively enumerable languages, the slide say that we can design an NTM M to take as input $x$, guess an $w$ such that $h(w)=x$ and simulate $M_1$ on $w$ (suppose $L=L(M_1)$). I will give a detailed sketch on how $M$ behaves. It

0) sets $l$ to 1

1) guesses one $w$ of length $l$

2) if there is such an $w$ invokes $M_1$ otherwise goes to 4)

3) if $M_1$ accepts so would M otherwise goes to 4)

4) increases $l$ by 1 and goes back to 1)
\\\\
So if $L$ is recursively enumerable, so is $L'$.
And of course we can use a DTM that generates each $w$ in a systematic way.
\\\\
Now what about recursive languages? Even though $L$ is recursive, the above process may not halt since there may be infinitely many $w$'s such that $h(w)=x$ but none of these $w$'s is in $L$. A automat $M$ se prostì zacyklí.
\\\\
To show recursive languages not closed under homomorphism, consider
the language $L=\{<M,w, a^i> |$ TM M accepts w in i steps$\}$, which is recursive.
However, if a homomorphism h maps a to $\lambda$ while keeping the remaining symbols intact, $h(L)=\{<M,w> |$ TM M accepts w$\}$ which is not recursive.\footnote{http://www.cs.uiuc.edu/class/fa10/cs373/lectures/lect18.pdf}
\end{e}

\begin{e}{Poznámka}{0}{Doplnìk RekJ musí vdy bıt RekJ}
Nech jazyk L je rekurzivní. Pak jistì existuje TS M, kterı tento jazyk rozhoduje. Tento TS M pracuje tak, e všechna slova w z L pøijme a všechna slova z -L (= doplnìk jazyka L) odmítne. Novı TS M', kterı bude rozhodovat jazyk -L sestrojíme takto:

    $\bullet$ Simuluj èinnost TS M pro vstup w.

    $\bullet$ Pokud TS M slovo pøijme, odmítni. Pokud TS M slovo odmítne, pøijmi.
\\
Novı TS M' bude jednoduše vracet pøesnì opaèné vısledky, ne pùvodní TS M. Tento TS M' rozhoduje jazyk -L.
\end{e}

\begin{e}{Poznámka}{0}{Doplnìk RSJ nemusí vdy bıt RSJ}
Komplementem èistì RSJ (tedy jazyka, kterı je RSJ, ale není rekurzivní) je vdy jazyk, kterı není rekurzivnì spoèetnı. Vezmìme pro pøíklad jazyk HALT, kterı je èistì RSJ, ale jeho komplement (NotHALT) není RSJ. To vyplıvá z definice NotHALT: HALT obsahuje dvojice TS:slovo takové, e TS pro dané slovo zastaví. NotHALT tedy obsahuje dvojice TS:slovo takové, kdy danı TS nezastaví pro slovo, e se zacyklí. Protoe nejsme schopni identifikovat cyklus, nejsme schopni sestavit TS, kterı by jazyk NotHALT pøijímal. Obecnì: pokud máme jazyk L, kterı je èistì RSJ, pak jeho komplement -L musí obsahovat takové slovo, pro nì se TS M' zacyklí a tudí tento TS M' nemùe pøijímat jazyk -L.
\end{e}

TODO: nejaka zduvodneni chybí

